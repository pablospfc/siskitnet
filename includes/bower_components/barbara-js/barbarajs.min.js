/**
 * BarbaraJS v1.3
 * (c) 2016 Jhordan Lima. https://github.com/Jhorzyto/barbara.js
 * License: MIT
 */
var barbaraJs=angular.module("Barbara-Js",["ngSanitize"]);
barbaraJs.factory("$request",["$http",function(a){var g=function(a){var f=null;return f=""==a.statusText?"Nenhum dado v\u00e1lido foi retornado pela requisi\u00e7\u00e3o":a.statusText,{code:a.status,message:f}},d=function(a,c){return angular.isDefined(a.code)||(a.code=c.status),angular.isDefined(a.message)||(a.message=c.statusText),a},e=function(a,c,b,k){if(angular.isDefined(c.callbackLoad)&&c.callbackLoad.loaded(),c.checkMeta)if(angular.isObject(a.data))if(angular.isObject(a.data.meta)){var f=angular.isDefined(a.data.meta.code)?
parseInt(a.data.meta.code):400;a.data.meta.code=f;var e=d(a.data.meta,a);200<=f&&299>=f?b(a.data.data,e,a):k(e,a.status,a);angular.forEach(c.callback,function(b){this.code==b.metaCode&&b.callback(a.data.data,this,a)},e)}else e=d({},a),angular.forEach(c.callback,function(b){this.code==b.metaCode&&b.callback(e,a.status,a)},e),k(e,a.status,a);else k(g(a),a.status,a);else b(a)},h=function(a,c,b){angular.isDefined(c.callbackLoad)&&c.callbackLoad.loaded();angular.isObject(a.data)||(a.data={});var f=angular.isObject(a.data.meta)?
d(a.data.meta,a):g(a);angular.forEach(c.callback,function(b){this.code==b.metaCode&&b.callback(f,a.status,a)},f);b(f,a.status,a)};return{parameter:{},urlencoded:!1,data:{},headers:{"X-Requested-With":"XMLHttpRequest"},method:"GET",url:void 0,callback:[],callbackLoad:void 0,checkMeta:!0,config:{},urlEncoded:function(){return this.addHeaders({"Content-Type":"application/x-www-form-urlencoded"}),this.urlencoded=function(a){var f=[],b;for(b in a)f.push(encodeURIComponent(b)+"="+encodeURIComponent(a[b]));
return f.join("&")},this},checkResponse:function(a){return this.checkMeta=!!a,this},removeAjaxHeader:function(){return angular.isDefined(this.headers["X-Requested-With"])&&delete this.headers["X-Requested-With"],this},addCallback:function(a,c){return angular.isNumber(a)&&angular.isFunction(c)&&this.callback.push({metaCode:a,callback:c}),this},addMethod:function(a){return this.method=angular.isString(a)?a:"GET",this},addData:function(a){return this.data=angular.isObject(a)?a:{},this},addParams:function(a){return this.parameter=
angular.isObject(a)?a:{},this},addHeaders:function(a){return angular.isObject(a)&&(this.headers=angular.extend(this.headers,a)),this},addUrl:function(a){return this.url=angular.isString(a)?a:this.url,this},load:function(a,c){if(angular.isObject(a)&&angular.isFunction(a.loading)&&angular.isFunction(a.loaded)&&(c=a.loaded,a=a.loading),!angular.isFunction(a)||!angular.isFunction(c))throw"N\u00e3o foi poss\u00edvel adicionar as fun\u00e7\u00f5es de carregamento!";return this.callbackLoad={onLoading:a,
loaded:c},this},get:function(a){return this.addUrl(a),this.addMethod("GET"),angular.copy(this)},post:function(a){return this.addUrl(a),this.addMethod("POST"),angular.copy(this)},put:function(a){return this.addUrl(a),this.addMethod("PUT"),angular.copy(this)},"delete":function(a){return this.addUrl(a),this.addMethod("DELETE"),angular.copy(this)},jsonp:function(a){return this.addUrl(a),this.addMethod("JSONP"),angular.copy(this)},send:function(d,c){var b=this;if(!angular.isFunction(d))throw"\u00c9 necess\u00e1rio definir um callback de sucesso no $request.send()!";
if(angular.isFunction(c)||(c=function(){}),!angular.isDefined(b.url))throw"Nenhum URL foi definido!";switch(angular.isDefined(b.callbackLoad)&&b.callbackLoad.onLoading(),b.config.headers=b.headers,b.urlencoded&&(b.config.transformRequest=b.urlencoded),b.method){case "GET":angular.extend(b.parameter,b.data);b.config.params=b.parameter;a.get(b.url,b.config).then(function(a){e(a,b,d,c)},function(a){h(a,b,c)});break;case "POST":b.config.params=b.parameter;a.post(b.url,b.data,b.config).then(function(a){e(a,
b,d,c)},function(a){h(a,b,c)});break;case "PUT":b.config.params=b.parameter;a.put(b.url,b.data,b.config).then(function(a){e(a,b,d,c)},function(a){h(a,b,c)});break;case "DELETE":b.config.params=b.parameter;b.config.data=b.data;a["delete"](b.url,b.config).then(function(a){e(a,b,d,c)},function(a){h(a,b,c)});break;case "JSONP":b.config.params=b.parameter;b.config.data=b.data;b.config.params.callback="JSON_CALLBACK";a.jsonp(b.url,b.config).then(function(a){e(a,b,d,c)},function(a){h(a,b,c)});break;default:b.config.params=
b.parameter,b.config.data=b.data,b.config.method=b.method,b.config.url=b.url,a(b.config).then(function(a){e(a,b,d,c)},function(a){h(a,b,c)})}}}}]);
barbaraJs.factory("bootstrap",function(){return{alert:function(){return{show:!1,changeShow:function(a){this.show=angular.isDefined(a)?a:!this.show},type:void 0,changeType:function(a){this.type=angular.isString(a)?a:this.type},title:void 0,changeTitle:function(a){this.title=angular.isString(a)?a:this.title},message:void 0,changeMessage:function(a){this.message=angular.isString(a)?a:this.message},responseSuccess:function(a){angular.isString(a)&&(this.changeTitle("Sucesso!"),this.changeType("success"),
this.changeMessage(a),this.changeShow(!0))},responseError:function(a){(this.changeTitle("Algo n\u00e3o ocorreu bem!"),this.changeType("danger"),angular.isDefined(a.error_message)&&angular.isString(a.error_message))?(this.changeMessage(a.error_message),this.changeType("warning")):angular.isDefined(a.error_message)&&angular.isArray(a.error_message)?(a=a.error_message,this.changeTitle(a.shift()),this.changeMessage(a.join("<br>")),this.changeType("warning")):angular.isDefined(a.message)&&angular.isString(a.message)?
(this.changeMessage(a.message),this.changeType("warning")):angular.isDefined(a.message)&&angular.isArray(a.message)?(a=a.message,this.changeTitle(a.shift()),this.changeMessage(a.join("<br>")),this.changeType("warning")):this.changeMessage("Ocorreu um erro na requisi\u00e7\u00e3o!");this.changeShow(!0)}}},loading:function(){return{show:!1,changeShow:function(a){this.show=angular.isDefined(a)?a:!this.show},message:"Carregando...",changeMessage:function(a){this.message=angular.isString(a)?a:this.message},
onLoading:function(a){this.message=angular.isString(a)?a:this.message;this.changeShow(!0)},loaded:function(){this.changeShow(!1)},getRequestLoad:function(a){var g=this;return{loading:function(){g.onLoading(a)},loaded:function(){g.loaded()}}}}},pagination:function(){return{pages:0,currentPage:1,pagination:[],callback:void 0,changePageCallback:function(a){this.callback=angular.isFunction(a)?a:this.callback},changePages:function(a){this.pages=angular.isNumber(a)?a:this.pages;this.processPagination()},
changeCurrentPage:function(a){return this.currentPage=angular.isNumber(a)&&0<a&&a<=this.pages?a:this.currentPage,a==this.currentPage},processPagination:function(){0!=this.pages&&(this.pagination=[],this.pagination.push({item:1,role:0<this.pages}),this.pagination.push({item:9>=this.pages?2:5>=this.currentPage?2:void 0,role:2<this.pages}),this.pagination.push({item:9>=this.pages||5>=this.currentPage?3:this.currentPage+5>=this.pages?this.pages-6:this.currentPage-2,role:3<this.pages}),this.pagination.push({item:9>=
this.pages||5>=this.currentPage?4:this.currentPage+5>=this.pages?this.pages-5:this.currentPage-1,role:4<this.pages}),this.pagination.push({item:9>=this.pages||5>=this.currentPage?5:this.currentPage+5>=this.pages?this.pages-4:this.currentPage,role:5<this.pages}),this.pagination.push({item:9>=this.pages||5>=this.currentPage?6:this.currentPage+5>=this.pages?this.pages-3:this.currentPage+1,role:6<this.pages}),this.pagination.push({item:9>=this.pages||5>=this.currentPage?7:this.currentPage+5>=this.pages?
this.pages-2:this.currentPage+2,role:7<this.pages}),this.pagination.push({item:9>=this.pages?8:10==this.pages&&5==this.currentPage?void 0:this.currentPage+5>=this.pages?this.pages-1:void 0,role:8<this.pages}),this.pagination.push({item:this.pages,role:1<this.pages}),angular.forEach(this.pagination,function(a){a["class"]={active:this.currentPage==a.item,disabled:angular.isUndefined(a.item)}},this))},clickAction:function(a){angular.isDefined(a)&&this.changeCurrentPage(a)&&(angular.isFunction(this.callback)?
(this.changePages(0),this.callback(this)):this.processPagination())}}}}});barbaraJs.directive("alertBootstrap",function(){return{restrict:"A",template:"<div class='alert alert-{{alert.type}} alert-dismissible' role='alert' ng-if='alert.show'><button type='button' class='close' ng-click='alert.changeShow()'><span aria-hidden='true'>&times;</span></button><strong>{{alert.title}}</strong> <p ng-bind-html='alert.message'></p></div>"}});
barbaraJs.directive("loadingBootstrap",function(){return{restrict:"A",template:"<div class='progress' ng-if='loading.show'> <div class='progress-bar progress-bar-striped active' role='progressbar' style='width: 100%'><i class='glyphicon glyphicon-refresh spinning'></i> <strong ng-bind-html='loading.message'></strong></div></div>"}});barbaraJs.directive("paginationBootstrap",function(){return{restrict:"A",template:"<nav ng-if='pagination.pages > 0'> <ul class='pagination'> <li ng-repeat='page in pagination.pagination' ng-if='page.role' ng-class='page.class'> <a href='' ng-click='pagination.clickAction(page.item)'>{{page.item ? page.item : '...'}}</a> </li></ul> </nav>"}});
barbaraJs.filter("timeago",function(){return function(a){var g=(new Date).getTime();if(!a)return"indefinido";if(angular.isDate(a)?a=a.getTime():angular.isNumber(a)?a=(new Date(1E3*a)).getTime():angular.isString(a)&&(a=(new Date(a)).getTime()),!angular.isNumber(a))return"Data invalida";var d=Math.abs((g-a)/1E3),e=[];return e=60>=d?["","agora"]:3600>d?[Math.round(Math.abs(d/60)),"m"]:86400>d?[Math.round(Math.abs(d/3600)),"h"]:604800>d?[Math.round(Math.abs(d/86400)),"d"]:31449600>d?[Math.round(Math.abs(d/
604800)),"sm"]:315569260>d?[Math.round(Math.abs(d/31556926)),"a"]:["","..."],e=e.join(""),a<=g?"h\u00e1 "+e:e}});barbaraJs.filter("cuttext",function(){return function(a,g,d,e){if(!a||!angular.isString(a))return"";if(!d||!angular.isNumber(d)||(d=parseInt(d,10),a.length<=d||g))return a;a=a.substr(0,d);g=a.lastIndexOf(" ");return-1!=g&&(a=a.substr(0,g)),a+(e||" \u2026")}});
